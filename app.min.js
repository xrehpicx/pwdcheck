function hexString(t){const e=new Uint8Array(t),s=[...e].map(t=>{const e=t.toString(16),s=e.padStart(2,"0");return s.toUpperCase()});return s.join("")}function digestMessage(t){const e=new TextEncoder,s=e.encode(t);return window.crypto.subtle.digest("SHA-1",s)}async function runCheck(t){if(""===t)return;const e=await digestMessage(t);hash=hexString(e),first=hash.substring(0,5),last=hash.substring(5);const s=await fetch("https://api.pwnedpasswords.com/range/"+first);if(200!==s.status)return console.log("Looks like there was a problem. Status Code: "+s.status),!1;const n=await s.text(),o=n.split("\r\n");let r=null;return o.forEach(e=>{const s=e.split(":");s[0]==last&&(r={text:t,hash:hash,count:s[1]})}),r}function onsubmit(t){t.preventDefault(),console.log("running");const e=document.querySelector("input").value,s=document.querySelector(".output"),n=s.querySelector("h1"),o=s.querySelector("span");(async()=>{s.className="output",s.style.display="block",s.classList.add("searching"),n.textContent="ðŸ˜°",o.textContent="";const t=await runCheck(e);s.classList.remove("searching"),t?(s.classList.add("warn"),n.textContent="YOUR PASSWORD IS LEAKED",o.textContent=`your password was found ${t.count} times in leaked password dumps`):(s.classList.add("safe"),n.textContent="Your Password is safe to use",o.textContent="")})()}let first="",last="",hash="";document.querySelector("input").addEventListener("input",t=>{if(t.target.value)onsubmit(t);else{const t=document.querySelector(".output");t.querySelector("h1"),t.querySelector("span");t.className="output",t.style.display="none"}}),document.querySelector("form").addEventListener("submit",t=>{onsubmit(t),document.querySelector("input").value=""});